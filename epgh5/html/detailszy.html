<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <title>加油好身材</title>
    <meta charset="UTF-8">
    <link href="../css/global.css" type="text/css" rel="stylesheet">
    <link href="../css/common.css" type="text/css" rel="stylesheet">
    <link rel="stylesheet" href="../css/details.css">
</head>

<body>
<div class="loading_mask">
    <div class="spinner"></div>
</div>
    <div id="pageContent" class="page-content videoInfo black">
        <div class="sel_lr">
            <img src="../img/logo.png" alt="">
            <span class="sel_time"></span>
        </div>
            <div>

            <div class="videoCon clear col aty details_page">
                <img src="../img/indexImg/zy4.png">
                <div class="detail_title">
                  <h3>加油好身材</h3>
                    <h6>地区 | 大陆 | 2018</h6>
                  <h6>美国 | 2018 | 科幻</h6>
                  <h6>约翰.博耶加 / 斯科特.伊斯特伍德</h6>
                  <p>《加油好身材》在延续第一季《Battle！好身材》实用性和娱乐性的实实用性和娱乐性的实用性和实用性和娱乐性的实用性和娱乐性的同时同时娱乐性的同时同时实用性和娱乐性的实用性和娱乐性的同时同时用性和娱乐性的同时同时，无论是节目模式、场景环节设计的创新性，还是健身教 练团队和健身方法的专业性，都进行了全面升级，通过明星的影响力向大众传递健康生活理念，激发观众的健身热情，号召全民加 入健身行列。</p>
                  <ul class="tops">
                    <li tabindex="1" class="li play active">
                      <img src="../img/logo1.png">
                      <p>播放</p>
                    </li>
                    <!--<li tabindex="2" class="li coll">-->
                      <!--<img src="../img/logo2.png">-->
                      <!--<p>收藏</p>-->
                    <!--</li>-->
                    <!--<li tabindex="3" class="li vip">-->
                        <!--<img src="../img/gao.png" alt="">-->
                    <!--</li>-->
                  </ul>
                </div>
            </div>
            <!-- 选集分段 把默认放在了这里-->
            <ul class="selectNumber col details_selectNum">
                <li tabindex="1" class="li mark">1-5</li>
                <li tabindex="2" class="li">6-10</li>
                <li tabindex="3" class="li">11-15</li>
            </ul>
                <!--选集-->
            <ul class="setNumber col zySetNum details_selectNum">
                <li tabindex="4" class="li">
                    <span>第1期: 《还珠》剧组20年后重聚，《还珠》剧组20年后重聚《还珠》剧组20年后重聚,沈腾，贾玲化身紫薇尔康...</span>
                    <img src="../img/perfect.png" alt="">
                </li>
                <li tabindex="4" class="li">
                    <span>第2期: 《还珠》剧组20年后重薇尔康...</span>
                    <img src="../img/vipf.png" alt="">
                </li>
                <li tabindex="4" class="li">
                    <span>第3期: 沈腾，贾玲化身紫薇尔康...</span>
                    <img src="../img/vipf.png" alt="">
                </li>
                <li tabindex="4" class="li">
                    <span>第4期:贾玲化身紫薇尔康...</span>
                    <img src="../img/vipf.png" alt="">
                </li>
                <li tabindex="4" class="li">
                    <span>第5期: 《还珠》剧组20年后重聚，沈腾，贾玲化身紫薇尔康...</span>
                    <img src="../img/vipf.png" alt="">
                </li>
            </ul>

            <div class="col tuijian details_tj">
                <h4 class="titelH4">为你推荐</h4>
                <div class="videoList" style="position: relative;bottom: 0; padding: 0;">
                    <!-- 剧集推荐 把默认放在了这里-->
                    <div class="ulWrap">
                        <ul class="tj">
                            <li tabindex="4" class="li">
                                <img src="../img/indexImg/zy4.png">
                             </li>
                            <li tabindex="5" class="li">
                                <img src="../img/indexImg/zy4.png">
                             </li>
                            <li tabindex="6" class="li">
                                <img src="../img/indexImg/zy4.png">
                            </li>
                            <li tabindex="7" class="li">
                                <img src="../img/indexImg/zy4.png">
                             </li>
                            <li tabindex="8" class="li">
                                <img src="../img/indexImg/zy4.png">
                             </li>
                            <li tabindex="9" class="li">
                                <img src="../img/indexImg/zy4.png">
                             </li>
                            <li tabindex="10" class="li">
                                <img src="../img/indexImg/zy4.png">
                             </li>
                            <li tabindex="11" class="li">
                                <img src="../img/indexImg/zy4.png">
                             </li>
                            <li tabindex="12" class="li">
                                <img src="../img/indexImg/zy4.png">
                             </li>
                            <li tabindex="13" class="li">
                                <img src="../img/indexImg/zy4.png">
                             </li>
                        </ul>
                    </div>
               </div>
            </div>
        </div>
    </div>
</body>
<script src="../js/jquery-1.12.4.min.js"></script>
<script src="../js/common.js"></script>

<script type="text/javascript">
// 键盘事件开始
$(function() {
    var jqThis;
    var colThis;
    var startAnimate = false
    var seltWidth;
    var totalWhidth = document.documentElement.scrollWidth;
    var screenWidth = document.body.offsetWidth;

    $(window).keydown(function (e) {
        e.stopPropagation()
        e.preventDefault()
        console.log(e.keyCode)
        $('.li').each(function () { // 左右的this
            if ($(this).hasClass('active')) {
                jqThis = $(this)
                seltWidth = $(this).width() + 200
            }
        });
        $('.col').each(function () { // 上下的this
            if ($(this).hasClass('aty')) {
                colThis = $(this)
            }
        });
        // console.log(e.keyCode)
        if(e.keyCode==38){ // 上
            console.log(colThis.index())
            if (colThis.prev().length === 0) {
                $('.col').last().addClass('aty')
                $('.col').last().find('.li').eq(0).addClass('active')
                bottom()
                $('.col').last().find('.tj').animate({
                    left: '0px'
                })
            }
            if (colThis.prev().hasClass('selectNumber')){ // 如果默认在 1-10集
                number('1-10')
                colThis.prev().children().removeClass('mark')
                colThis.prev().find('.li').eq(0).addClass('mark')
            }
            if(colThis.prev().hasClass('setNumber')){
                tops()
            }
            colThis.prev().addClass('aty')
            colThis.prev().find('.li').eq(0).addClass('active')
            colThis.removeClass('aty')
            colThis.find('.li').removeClass('active')
        }
        if(e.keyCode==40){ // 下
            console.log(colThis.next().length)
            if (colThis.next().length === 0) { // 这是到头啦
                $('.col').first().addClass('aty')
                $('.col').first().find('.li').eq(0).addClass('active')
                tops()
            }
            if (colThis.next().hasClass('selectNumber')){ // 如果默认在 1-10集
                number('1-10')
                colThis.next().children().removeClass('mark')
                colThis.next().find('.li').eq(0).addClass('mark')
            }
            if (colThis.next().hasClass('details_tj')) { // 推荐
                bottom()
                colThis.next().children().find('.tj').animate({
                    left: '0px'
                })
            }
            colThis.next().addClass('aty')
            colThis.next().find('.li').eq(0).addClass('active')
            colThis.removeClass('aty')
            colThis.find('.li').removeClass('active')
        }
        if(e.keyCode==39){ // 右-39
            if(jqThis.parents().hasClass('videoCon')){ // 父元素是1
                if (jqThis.next().length === 0) { // 这是到头啦
                    jqThis.parents('.aty').find('.li').eq(0).addClass('active')
                } else {
                    jqThis.removeClass('active')
                    jqThis.next().addClass('active')
                }

                // 选择数字的时候输出的数字
            } else if (jqThis.parents().hasClass('setNumber')) {
                if (mod() == 0) {
                    jqThis.parents('.aty').find('.li').eq(0).addClass('active')
                }else{
                    if (jqThis.next().length === 0 || jqThis.next().css('display') === 'none') { // 这是到头啦
                        jqThis.parents('.aty').find('.li').eq(0).addClass('active')
                        jqThis.removeClass('active')
                    } else {
                        jqThis.removeClass('active')
                        jqThis.next().addClass('active')
                    }
                }
            } else if (jqThis.parents().hasClass('selectNumber')){ // 数字选择
                if (jqThis.next().length === 0) { // 这是到头啦
                    jqThis.parents('.aty').find('.li').eq(0).addClass('active')
                    number(jqThis.parents('.aty').find('.li').eq(0).html())
                } else {
                    number(jqThis.next().html())
                }
                jqThis.removeClass('active mark')
                jqThis.next().addClass('active mark')
            } else if (jqThis.parents().hasClass('tuijian')) {
                if (!startAnimate) {
                    startAnimate = true
                    jqThis.removeClass('active')
                    if (jqThis.next().length === 0) { // 这是到头啦
                        jqThis.parents('.aty').find('.li').eq(0).addClass('active')
                        jqThis.parents('.tj').animate({
                            left: '0px'
                        })
                        startAnimate = false
                        return
                    }
                    var offsetRight = screenWidth - jqThis.next().offset().left - seltWidth
                    var parentOffsetL = jqThis.parents('.tj').offset().left
                    var nextL = jqThis.next().position().left
                    var nextOffsetL = parentOffsetL + nextL
                    var nextoffsetR = screenWidth - nextOffsetL - seltWidth
                    if (totalWhidth - seltWidth - jqThis.next().position().left <= 20) {
                        if (nextoffsetR < 0) {
                            jqThis.parents('.tj').animate({
                                left: totalWhidth - seltWidth - jqThis.next().position().left - 20 + 'px'
                            })
                        }
                    }
                    jqThis.next().addClass('active')
                }

            }
        }
        if(e.keyCode==37){ // 左-37
            if(jqThis.parents().hasClass('videoCon')){ // 父元素是1
                if (jqThis.prev().length === 0) { // 这是到头啦
                    jqThis.parents('.aty').find('.li').last().addClass('active')
                } else {
                    jqThis.removeClass('active') //
                    jqThis.prev().addClass('active')
                }

                // 选择数字的时候输出的数字
            } else if (jqThis.parents().hasClass('setNumber')) {
                if (mod() == 0) {
                    jqThis.parents('.aty').find('.li').eq(0).addClass('active')
                }else{
                    if (jqThis.prev().length === 0) { // 这是到头啦
                        jqThis.parents('.aty').find('.li').eq(mod()).addClass('active')
                        jqThis.removeClass('active')
                    } else {
                        jqThis.removeClass('active')
                        jqThis.prev().addClass('active')
                    }
                }
            } else if (jqThis.parents().hasClass('selectNumber')){ // 数字选择
                if (jqThis.prev().length === 0) { // 这是到头啦
                    jqThis.parents('.aty').find('.li').last().addClass('active')
                    number(jqThis.parents('.aty').find('.li').last().html())
                } else {
                    number(jqThis.prev().html())
                }
                jqThis.removeClass('active mark') //
                jqThis.prev().addClass('active mark')
            } else if (jqThis.parents().hasClass('tuijian')) {
                if (!startAnimate) {
                    startAnimate = true
                    jqThis.removeClass('active')
                    if(jqThis.parent().hasClass('tj')){ // 父元素是1
                        if (jqThis.prev().length === 0) { // 这是到头啦
                            jqThis.parents('.aty').find('.li').last().addClass('active')
                            jqThis.parents('.tj').animate({
                                left: totalWhidth - seltWidth - jqThis.parents('.tj').find('.li').last().position().left - 50 + 'px'
                            })
                            startAnimate = false
                            return
                        }
                        if (jqThis.prev().offset().left <= 180) {
                            jqThis.parents('.tj').animate({
                                left: 10 - jqThis.prev().position().left + 'px'
                            })
                        }
                        jqThis.prev().addClass('active')
                    }
                }
            }
        }
        if(e.keyCode==13){ // enter
            if (jqThis.hasClass('play')) {
                window.location.href='../broadcast.html'
            } else if (jqThis.parent().hasClass('tj')){
                window.location.href='detailszy.html'
            }
        }
        // 返回上一页
        if (e.keyCode == 8) { // backspace
            window.history.go(-1)
        }
        setTimeout(function () {
            startAnimate = false
        }, 200)
    })

    // 返回当前集数的 index
    function mod() {
        var index = 0
        $(".setNumber .li").each(function (item,i) {
            if ($(this).css('display') == 'block') {
                index = $(this).index()
            }
        })
        return index
    }
    // 剧集
    function number(str) {
        var arr = str.split('-')
        console.log(arr)
        var start = 0
        var end = 0
        if (arr.length>1) {
            start = parseInt(arr[0])
            end = parseInt(arr[1])
        }else { // =1
            start = parseInt(arr[0])
            end = parseInt(arr[0])
        }
        $(".setNumber .li").each(function (item,i) {
            if (start<=end) {
                $(this).show()
                $(this).children().html("<span>第"+start+"期: 《还珠》剧组20年后重聚，沈腾，贾玲化身紫薇尔康...</span>")
                start = start+1
            } else {
                $(this).hide()
            }
        })
    }

    function scrollToEnd(){//滚动到底部
        var h = $(document).height()-$(window).height();
        $(document).scrollTop(h);
    }
})

</script>
</html>
